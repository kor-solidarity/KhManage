<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Admin">
	<resultMap type="Access" id="accessResultSet">
		<result property="accessGroupNo" column="ACCESSGROUP_NO"/>
		<result property="accessName" column="ACCESS_NAME"/>
		<result property="aContent" column="A_CONTENT"/>
		<result property="Status" column="STATUS"/>
		<result property="createDate" column="CREATE_DATE"/>
		<result property="modifyDate" column="MODIFY_DATE"/>
	</resultMap>
	
	<resultMap type="DepartMent" id="departResultSet">
		<id property="deptNo" column="DEPT_NO"/>
		<result property="deptName" column="DEPT_NAME"/>
		<result property="highDept" column="HIGH_DEPT"/>
		<result property="deptLevle" column="DEPT_LEVEL"/>
	</resultMap>
	
	
	<insert id="insertAccessGroup" parameterType="Access">
		INSERT INTO ACCESSGROUP
		VALUES(SEQ_ACG_NO.NEXTVAL, #{accessName}, #{aContent},SYSDATE, SYSDATE, 'Y')
	</insert>
	
	<select id="selectAll" resultMap="accessResultSet" >
		SELECT ACCESSGROUP_NO
			  ,ACCESS_NAME
			  ,A_CONTENT
			  ,STATUS
			  ,CREATE_DATE
			  ,MODIFY_DATE
		FROM ACCESSGROUP	  
	</select>
	
	<select id="getListCount" resultType="_int">
		SELECT COUNT(*)
		FROM ACCESSGROUP
	</select>
	
	<select id="searchAccess" resultMap="accessResultSet">
		SELECT ACCESSGROUP_NO
			  ,ACCESS_NAME
			  ,A_CONTENT
			  ,STATUS
			  ,CREATE_DATE
			  ,MODIFY_DATE
		FROM ACCESSGROUP	
		WHERE 1 = 1
		<!-- <if test="title != null"> -->
			AND ACCESS_NAME LIKE '%' || #{accessName} || '%'
		<!-- </if> -->
		<!-- <if test="writer != null">
			AND USER_NAME = #{writer}
		</if>
		<if test="content != null">
			AND BCONTENT LIKE '%' || #{content} || '%'
		</if> -->
	</select>
	
	<select id="departSelectAll" resultMap="departResultSet">
		SELECT DEPT_NO
			  ,DEPT_NAME
			  ,HIGH_DEPT
			  ,DEPT_LEVEL
		FROM DEPT	
		ORDER BY 1   
	</select>
	
	<select id="deptSelectOne" parameterType="DepartMent" resultMap="departResultSet">
		SELECT D.DEPT_NO
			  ,D.DEPT_NAME
			  ,E.DEPT_NAME AS HIGH_DEPT
			  ,D.DEPT_LEVEL
		FROM DEPT D	
        JOIN DEPT E ON(D.HIGH_DEPT = E.DEPT_NO)
		WHERE D.DEPT_NAME = #{deptName}
	</select>
	
	<select id="selectTeam" resultMap="departResultSet">
		SELECT DEPT_NO
			  ,DEPT_NAME
			  ,HIGH_DEPT
			  ,DEPT_LEVEL
		FROM DEPT
		WHERE HIGH_DEPT = #{deptNo}	  
	</select>

</mapper>










  